@startuml
title 신고 및 제재 활동 다이어그램

|#LightCoral|신고 접수|
start

:신고 요청 수신;
note right: 신고 대상, 사유, 증거

:신고 데이터 검증;

if (유효한 신고?) then (아니오)
  :400 Bad Request 응답;
  stop
endif

:중복 신고 확인;

if (이미 신고됨?) then (예)
  :409 Duplicate Report 응답;
  stop
endif

:신고 레코드 생성;

:신고 접수 알림 발송;
note right: 신고자에게 접수 확인

:201 신고 접수 완료 응답;

|#LightBlue|신고 검토|
:관리자 신고 목록 조회;

:신고 상세 내용 검토;

:증거 자료 분석;

:신고 처리 결정;

if (신고 내용 유효?) then (아니오)
  :신고 기각 처리;
  :기각 사유 기록;
  :신고자에게 기각 알림;
else (예)
  :신고 승인 처리;
  :제재 조치 결정;
endif

|#LightYellow|제재 조치|
if (제재 필요?) then (예)
  :제재 유형 결정;
  note right: 경고, 정지, 영구정지

  :제재 기간 설정;

  :제재 레코드 생성;

  if (계정 정지?) then (예)
    :계정 상태 변경;
    :활성 세션 무효화;
    :진행 중인 활동 제한;
  endif

  :제재 대상자에게 알림 발송;
  :신고자에게 처리 결과 알림;
endif

:제재 감사 로그 기록;

:200 제재 처리 완료 응답;

|#LightGreen|제재 해제|
:제재 해제 요청;

:해제 권한 검증;

if (해제 권한 있음?) then (아니오)
  :403 Permission Denied 응답;
  stop
endif

:제재 상태 확인;

if (활성 제재 존재?) then (아니오)
  :400 No Active Sanction 응답;
  stop
endif

:제재 해제 처리;

if (계정 정지 해제?) then (예)
  :계정 상태 복구;
  :제한 활동 복구;
endif

:해제 알림 발송;
:해제 감사 로그 기록;

:200 해제 완료 응답;

stop

@enduml
