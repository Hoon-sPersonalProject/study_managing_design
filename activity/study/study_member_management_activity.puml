@startuml
title 스터디 멤버 관리 액티비티 다이어그램

|스터디 리더|
start
:스터디 멤버 관리 페이지 접근;

|시스템|
:리더 권한 검증;
if (리더 권한?) then (없음)
  |스터디 리더|
  :권한 없음 메시지;
  stop
else (보유)
  :현재 멤버 목록 조회;
  :신청 대기 목록 조회;

  |스터디 리더|
  :멤버 현황 확인;
  :관리 작업 선택;

  if (작업 선택) then (신청 검토)
    :대기 중인 신청 목록 확인;

    if (신청자 있음?) then (없음)
      :신청자 없음 메시지;
    else (있음)
      :신청자별 검토;

      while (신청자 남아있음?) is (예)
        :신청자 정보 확인;
        note right: 프로필, 신청 동기, 활동 이력

        if (승인 여부 결정) then (승인)
          |시스템|
          :정원 여유 확인;
          if (정원 초과?) then (초과)
            |스터디 리더|
            :정원 초과 알림;
          else (여유)
            :신청자를 정식 멤버로 등록;
            :멤버십 활성화;
            :승인 알림 발송;
            :스터디 입장 안내 발송;

            |스터디 리더|
            :승인 완료 확인;
          endif

        else (거부)
          |시스템|
          :신청 상태를 거부로 변경;
          :거부 사유와 함께 알림 발송;

          |스터디 리더|
          :거부 완료 확인;
        endif
      end
    endwhile (아니오)

  if (멤버 권한 관리) then
    :현재 멤버 목록에서 선택;
    :권한 변경 대상 선택;

    if (권한 변경 유형) then (부리더 임명)
      |시스템|
      :부리더 임명 권한 확인;
      :대상자 자격 검증;
      if (임명 가능?) then (불가)
        |스터디 리더|
        :임명 불가 메시지;
      else (가능)
        :멤버 권한을 부리더로 변경;
        :권한 변경 알림 발송;
        |스터디 리더|
        :부리더 임명 완료;
      endif

    else if (일반 멤버 강등) then
      |시스템|
      :현재 부리더인지 확인;
      :강등 권한 확인;
      :일반 멤버로 권한 변경;
      :권한 변경 알림 발송;

      |스터디 리더|
      :강등 완료 확인;
    endif

  else if (멤버 제명) then
    :제명 대상 멤버 선택;
    :제명 사유 입력;
    :제명 확인;

    |시스템|
    :제명 권한 확인;
    note right: 자기 자신 제명 불가, 리더 제명 불가

    if (제명 가능?) then (불가)
      |스터디 리더|
      :제명 불가 메시지;
    else (가능)
      :멤버십 비활성화;
      :스터디에서 제외;
      :제명 알림 발송;
      :제명 이력 기록;

      |스터디 리더|
      :제명 완료 확인;
    endif

  else if (멤버 활동 모니터링) then
    :멤버별 활동 통계 조회;
    note right: 참여율, 기여도, 마지막 활동일

    |스터디 리더|
    :활동 현황 분석;

    if (비활성 멤버 발견?) then (예)
      if (조치 선택) then (개별 연락)
        :개별 메시지 발송;
        |시스템|
        :개별 알림 메시지 전송;

      else if (경고 발송)
        :활동 독려 메시지 발송;
        |시스템|
        :활동 독려 알림 전송;

      else (제명 고려)
        note right: 위 제명 프로세스 실행
      endif
    else (아니오)
      :모든 멤버 활발한 상태 확인;
    endif

  else (리더십 위임)
    :후계자 선택;
    :위임 조건 확인;
    note right: 일정 기간 이상 활동, 신뢰도 등

    if (위임 조건 충족?) then (불충족)
      |스터디 리더|
      :위임 불가 메시지;
    else (충족)
      :위임 확인;

      |시스템|
      :기존 리더를 일반 멤버로 변경;
      :새 리더 권한 부여;
      :리더십 변경 알림 전체 발송;
      :리더십 변경 이력 기록;

      |새 리더|
      :리더십 인수 완료;
    endif
  endif
endif

stop

@enduml
